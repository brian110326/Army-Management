<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <style>
        .fieldError {
            border-color: #bd2130 !important;
        }
        .error-message {
            color: #bd2130;  /* 빨간색 */
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }
    </style>
    <meta charset="UTF-8">
    <title>군인 등록</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="mb-4">군인 등록</h2>
    <form th:action="@{/soldiers/{id}/edit(id=${id})}" th:object="${soldierDto}" method="post"
          class="border p-4 bg-white shadow-sm rounded">

        <div class="mb-3">
            <label for="name" class="form-label">이름</label>
            <input th:class="${#fields.hasErrors('name')}? 'form-control fieldError' : 'form-control'"
                   type="text" th:field="*{name}" id="name"
                   placeholder="이름을 입력하세요">
            <p th:if="${#fields.hasErrors('name')}"
               th:errors="*{name}" th:class="'error-message'">Incorrect date</p>
        </div>

        <div class="mb-3">
            <label for="armyNumber" class="form-label">군번</label>
            <input th:class="${#fields.hasErrors('armyNumber')}? 'form-control fieldError' : 'form-control'"
                   type="text" th:field="*{armyNumber}" id="armyNumber"
                   placeholder="군번을 입력하세요">
            <p th:if="${#fields.hasErrors('armyNumber')}"
               th:errors="*{armyNumber}" th:class="'error-message'">Incorrect date</p>
        </div>

        <div class="mb-3">
            <label for="bornDate" class="form-label">생년월일</label>
            <input th:class="${#fields.hasErrors('bornDate')}? 'form-control fieldError' : 'form-control'"
                   type="date" th:field="*{bornDate}" id="bornDate">
            <p th:if="${#fields.hasErrors('bornDate')}"
               th:errors="*{bornDate}" th:class="'error-message'">Incorrect date</p>
        </div>

        <div class="mb-3">
            <label for="enlistDate" class="form-label">입영날짜</label>
            <input th:class="${#fields.hasErrors('enlistDate')}? 'form-control fieldError' : 'form-control'"
                   type="date" th:field="*{enlistDate}" id="enlistDate">
            <p th:if="${#fields.hasErrors('enlistDate')}"
               th:errors="*{enlistDate}" th:class="'error-message'">Incorrect date</p>
        </div>

        <div class="mb-3">
            <label for="rank" class="form-label">계급</label>
            <select th:class="${#fields.hasErrors('rank')}? 'form-control fieldError' : 'form-control'"
                    th:field="*{rank}" id="rank">
                <option value="">계급 선택</option>
                <option th:each="r : ${ranks}"
                        th:value="${r}" th:text="${r}">계급
                </option>
            </select>
            <p th:if="${#fields.hasErrors('rank')}"
               th:errors="*{rank}" th:class="'error-message'">Incorrect date</p>
        </div>

        <div class="mb-3">
            <label for="position" class="form-label">직책</label>
            <select th:class="${#fields.hasErrors('position')}? 'form-control fieldError' : 'form-control'"
                    th:field="*{position}" id="position">
                <option value="">직책 선택</option>
                <option th:each="p : ${positions}"
                        th:value="${p}" th:text="${p}">직책
                </option>
            </select>
            <p th:if="${#fields.hasErrors('position')}"
               th:errors="*{position}" th:class="'error-message'">Incorrect date</p>
        </div>

        <div class="mb-3">
            <label for="unitId" class="form-label">소속 부대</label>
            <select th:class="${#fields.hasErrors('unitId')}? 'form-control fieldError' : 'form-control'"
                    th:field="*{unitId}" id="unitId">
                <option value="">부대 선택</option>
                <option th:each="unit : ${leafUnits}"
                        th:value="${unit.id}"
                        th:text="${unit.name}">
                </option>
            </select>
            <p th:if="${#fields.hasErrors('unitId')}"
               th:errors="*{unitId}" th:class="'error-message'">Incorrect date</p>
        </div>

        <button type="submit" class="btn btn-primary">최종수정</button>
        <a th:href="@{/soldiers}" class="btn btn-danger">취소</a>
    </form>
</div>

<!-- Bootstrap JS CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
